<UserControl x:Class="AioStudy.UI.Views.Overviews.ModuleOverViewView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:MaIc="clr-namespace:Material.Icons.WPF;assembly=Material.Icons.WPF"
             xmlns:local="clr-namespace:AioStudy.UI.Views.Overviews"
             mc:Ignorable="d" 
             d:DesignHeight="1800" d:DesignWidth="1200"
             Background="#212226">

    <UserControl.Resources>
        <!-- Card Style -->
        <Style x:Key="InfoCard" TargetType="Border">
            <Setter Property="Background" Value="#1F2024"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Padding" Value="20"/>
            <Setter Property="Margin" Value="10"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#3A3D45"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#000000" Direction="270" ShadowDepth="2" BlurRadius="8" Opacity="0.2"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Scrollbar Styles -->
        <Style x:Key="LocalScrollBarThumb" TargetType="Thumb">
            <Setter Property="Background" Value="#4A4D55"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Thumb">
                        <Border Background="#4A4D55" 
                        CornerRadius="3" 
                        Opacity="0.6"/>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Opacity" Value="0.8"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="LocalScrollBar" TargetType="ScrollBar">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Width" Value="8"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ScrollBar">
                        <Grid Background="Transparent" Width="8">
                            <Track Name="PART_Track" IsDirectionReversed="true">
                                <Track.DecreaseRepeatButton>
                                    <RepeatButton Command="ScrollBar.PageUpCommand" 
                                          Opacity="0" 
                                          Background="Transparent"/>
                                </Track.DecreaseRepeatButton>
                                <Track.Thumb>
                                    <Thumb Style="{StaticResource LocalScrollBarThumb}"/>
                                </Track.Thumb>
                                <Track.IncreaseRepeatButton>
                                    <RepeatButton Command="ScrollBar.PageDownCommand" 
                                          Opacity="0" 
                                          Background="Transparent"/>
                                </Track.IncreaseRepeatButton>
                            </Track>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Metric Card Style -->
        <Style x:Key="MetricCard" TargetType="Border">
            <Setter Property="Background" Value="#1F2024"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="15"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#3A3D45"/>
        </Style>

        <!-- Header Text Style -->
        <Style x:Key="HeaderText" TargetType="TextBlock">
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="#E0E0E0"/>
            <Setter Property="Margin" Value="0,0,0,15"/>
        </Style>

        <!-- Label Style -->
        <Style x:Key="LabelText" TargetType="TextBlock">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Foreground" Value="#A0AEC0"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0,0,0,4"/>
        </Style>

        <!-- Value Style -->
        <Style x:Key="ValueText" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Foreground" Value="#E0E0E0"/>
            <Setter Property="FontWeight" Value="Medium"/>
        </Style>

        <!-- Status Badge Styles -->
        <Style x:Key="StatusBadgeBase" TargetType="Border">
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Padding" Value="8,4"/>
            <Setter Property="HorizontalAlignment" Value="Left"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>
    </UserControl.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
        <ScrollViewer.Resources>
            <Style TargetType="ScrollBar" BasedOn="{StaticResource LocalScrollBar}"/>
        </ScrollViewer.Resources>
        <Grid Margin="30">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <!-- Header -->
                <RowDefinition Height="Auto"/>
                <!-- Quick Metrics -->
                <RowDefinition Height="Auto"/>
                <!-- Main Content -->
                <RowDefinition Height="*"/>
                <!-- Additional Content -->
            </Grid.RowDefinitions>

            <!-- HEADER SECTION -->
            <Grid Grid.Row="0" Margin="0,0,0,30">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Module Title and Info -->
                <StackPanel Grid.Column="0">
                    <!-- Back Button -->
                    <Button Style="{StaticResource GrayGradientButton}"
                            HorizontalAlignment="Left"
                            Command="{Binding BackCommand}"
                            Padding="8,6"
                            Margin="0,0,0,15"
                            ToolTip="Back to Modules">
                        <StackPanel Orientation="Horizontal">
                            <MaIc:MaterialIcon Kind="ArrowLeft" Width="16" Height="16" Margin="0,0,6,0"/>
                            <TextBlock Text="Back to Modules" FontSize="12"/>
                        </StackPanel>
                    </Button>

                    <!-- Module Name -->
                    <TextBlock Text="{Binding ModuleName, FallbackValue='Advanced Programming and Data Structures'}"
                               FontSize="36"
                               FontWeight="Bold"
                               Foreground="White"
                               Margin="0,0,0,8"/>

                    <!-- Module Subtitle -->
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                        <MaIc:MaterialIcon Kind="BookOpenPageVariant" 
                                           Width="16" Height="16" 
                                           Foreground="#A0AEC0"
                                           VerticalAlignment="Center"
                                           Margin="0,0,6,0"/>
                        <TextBlock Text="Module Overview" 
                                   FontSize="14" 
                                   Foreground="#A0AEC0"
                                   VerticalAlignment="Center"/>
                    </StackPanel>
                </StackPanel>

                <!-- Action Buttons -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Top">
                    <Button Style="{StaticResource GrayGradientButton}"
                            Padding="10,8"
                            Margin="0,0,10,0"
                            ToolTip="Edit Module">
                        <StackPanel Orientation="Horizontal">
                            <MaIc:MaterialIcon Kind="EditOutline" Width="16" Height="16" Margin="0,0,6,0"/>
                            <TextBlock Text="Edit" FontSize="12"/>
                        </StackPanel>
                    </Button>

                    <Button Style="{StaticResource RedGradientButtonThinBorder}"
                            Padding="10,8"
                            Command="{Binding DeleteModuleCommand}"
                            CommandParameter="{Binding Module}"
                            ToolTip="Delete Module">
                        <StackPanel Orientation="Horizontal">
                            <MaIc:MaterialIcon Kind="DeleteOutline" Width="16" Height="16" Margin="0,0,6,0"/>
                            <TextBlock Text="Delete" FontSize="12"/>
                        </StackPanel>
                    </Button>
                </StackPanel>
            </Grid>

            <!-- QUICK METRICS -->
            <Grid Grid.Row="1" Margin="0,0,0,30">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Credits Card -->
                <Border Grid.Column="0" Style="{StaticResource MetricCard}">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                            <MaIc:MaterialIcon Kind="Star" Width="20" Height="20" Foreground="#F6E05E" Margin="0,0,8,0"/>
                            <TextBlock Text="Credits" Style="{StaticResource LabelText}"/>
                        </StackPanel>
                        <TextBlock Text="{Binding Module.ModuleCredits, FallbackValue=6}" 
                                   FontSize="24" 
                                   FontWeight="Bold" 
                                   Foreground="#F6E05E"/>
                        <TextBlock Text="ECTS Points" 
                                   FontSize="10" 
                                   Foreground="#A0AEC0"/>
                    </StackPanel>
                </Border>

                <!-- Status Card -->
                <Border Grid.Column="1" Style="{StaticResource MetricCard}">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                            <MaIc:MaterialIcon Kind="CheckCircle" Width="20" Height="20" Foreground="#68D391" Margin="0,0,8,0"/>
                            <TextBlock Text="Status" Style="{StaticResource LabelText}"/>
                        </StackPanel>
                        <TextBlock Text="{Binding Module.ExamStatus, FallbackValue='In Progress'}" 
                                   FontSize="24" 
                                   FontWeight="Bold" 
                                   Foreground="#68D391"/>
                        <TextBlock Text="Current Status" 
                                   FontSize="10" 
                                   Foreground="#A0AEC0"/>
                    </StackPanel>
                </Border>

                <!-- Grade Card -->
                <Border Grid.Column="2" Style="{StaticResource MetricCard}">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                            <MaIc:MaterialIcon Kind="Trophy" Width="20" Height="20" Foreground="#9F7AEA" Margin="0,0,8,0"/>
                            <TextBlock Text="Grade" Style="{StaticResource LabelText}"/>
                        </StackPanel>
                        <TextBlock FontSize="24" FontWeight="Bold" Foreground="#9F7AEA">
                            <TextBlock.Text>
                                <Binding Path="Module.Grade" StringFormat="F1" FallbackValue="2.3" TargetNullValue="N/A"/>
                            </TextBlock.Text>
                        </TextBlock>
                        <TextBlock Text="Final Grade" 
                                   FontSize="10" 
                                   Foreground="#A0AEC0"/>
                    </StackPanel>
                </Border>

                <!-- Study Time Card -->
                <Border Grid.Column="3" Style="{StaticResource MetricCard}">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                            <MaIc:MaterialIcon Kind="Clock" Width="20" Height="20" Foreground="#4FD1C7" Margin="0,0,8,0"/>
                            <TextBlock Text="Study Time" Style="{StaticResource LabelText}"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock FontSize="20" FontWeight="Bold" Foreground="#4FD1C7">
                                
                            </TextBlock>
                        </StackPanel>
                        <TextBlock Text="Total Time" 
                                   FontSize="10" 
                                   Foreground="#A0AEC0"/>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- MAIN CONTENT -->
            <Grid Grid.Row="2">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Left Column -->
                <StackPanel Grid.Column="0">
                    <!-- Module Details Card -->
                    <Border Style="{StaticResource InfoCard}">
                        <StackPanel>
                            <TextBlock Text="Module Details" Style="{StaticResource HeaderText}"/>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <!-- Semester -->
                                <StackPanel Grid.Row="0" Grid.Column="0" Margin="0,0,10,15">
                                    <TextBlock Text="Semester" Style="{StaticResource LabelText}"/>
                                    <TextBlock Text="{Binding Module.Semester.Name, FallbackValue='Winter 2024/25'}" Style="{StaticResource ValueText}"/>
                                </StackPanel>

                                <!-- Created Date -->
                                <StackPanel Grid.Row="0" Grid.Column="1" Margin="10,0,0,15">
                                    <TextBlock Text="Created" Style="{StaticResource LabelText}"/>
                                    <TextBlock Text="{Binding Module.CreatedString, FallbackValue='15.01.2024'}" Style="{StaticResource ValueText}"/>
                                </StackPanel>

                                <!-- Exam Date -->
                                <StackPanel Grid.Row="1" Grid.Column="0" Margin="0,0,10,15">
                                    <TextBlock Text="Exam Date" Style="{StaticResource LabelText}"/>
                                    <TextBlock Style="{StaticResource ValueText}">
                                        <TextBlock.Text>
                                            <Binding Path="Module.ExamDate" StringFormat="dd.MM.yyyy" FallbackValue="15.07.2024" TargetNullValue="Not Set"/>
                                        </TextBlock.Text>
                                    </TextBlock>
                                </StackPanel>

                                <!-- Module ID -->
                                <StackPanel Grid.Row="1" Grid.Column="1" Margin="10,0,0,15">
                                    <TextBlock Text="Module ID" Style="{StaticResource LabelText}"/>
                                    <TextBlock Text="{Binding Module.Id, FallbackValue='001'}" Style="{StaticResource ValueText}"/>
                                </StackPanel>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- Progress Card -->
                    <Border Style="{StaticResource InfoCard}">
                        <StackPanel>
                            <TextBlock Text="Study Progress" Style="{StaticResource HeaderText}"/>

                            <!-- Progress Bar -->
                            <Grid Margin="0,0,0,15">
                                <Border Background="#2A2D35" CornerRadius="10" Height="20">
                                    <Border Background="#4FD1C7" 
                                            CornerRadius="10" 
                                            HorizontalAlignment="Left" 
                                            Width="120"/>
                                </Border>
                                <TextBlock Text="60% Complete" 
                                           HorizontalAlignment="Center" 
                                           VerticalAlignment="Center"
                                           FontSize="11" 
                                           FontWeight="SemiBold"
                                           Foreground="White"/>
                            </Grid>

                            <!-- Study Sessions -->
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="Sessions" Style="{StaticResource LabelText}"/>
                                    <TextBlock Text="12" Style="{StaticResource ValueText}"/>
                                </StackPanel>

                                <StackPanel Grid.Column="1">
                                    <TextBlock Text="Avg. Session" Style="{StaticResource LabelText}"/>
                                    <TextBlock Text="1h 15m" Style="{StaticResource ValueText}"/>
                                </StackPanel>

                                <StackPanel Grid.Column="2">
                                    <TextBlock Text="Goal" Style="{StaticResource LabelText}"/>
                                    <TextBlock Text="25h" Style="{StaticResource ValueText}"/>
                                </StackPanel>
                            </Grid>
                        </StackPanel>
                    </Border>
                </StackPanel>

                <!-- Right Column -->
                <StackPanel Grid.Column="1">
                    <!-- Quick Actions Card -->
                    <Border Style="{StaticResource InfoCard}">
                        <StackPanel>
                            <TextBlock Text="Quick Actions" Style="{StaticResource HeaderText}"/>

                            <Button Style="{StaticResource GradientButton}" 
                                    Margin="0,0,0,10"
                                    Padding="12,8">
                                <StackPanel Orientation="Horizontal">
                                    <MaIc:MaterialIcon Kind="Play" Width="16" Height="16" Margin="0,0,8,0"/>
                                    <TextBlock Text="Start Study Session"/>
                                </StackPanel>
                            </Button>

                            <Button Style="{StaticResource GrayGradientButton}" 
                                    Margin="0,0,0,10"
                                    Padding="12,8">
                                <StackPanel Orientation="Horizontal">
                                    <MaIc:MaterialIcon Kind="BookOpenVariant" Width="16" Height="16" Margin="0,0,8,0"/>
                                    <TextBlock Text="View Notes"/>
                                </StackPanel>
                            </Button>

                            <Button Style="{StaticResource GrayGradientButton}" 
                                    Margin="0,0,0,10"
                                    Padding="12,8">
                                <StackPanel Orientation="Horizontal">
                                    <MaIc:MaterialIcon Kind="CalendarPlus" Width="16" Height="16" Margin="0,0,8,0"/>
                                    <TextBlock Text="Schedule Study"/>
                                </StackPanel>
                            </Button>

                            <Button Style="{StaticResource GrayGradientButton}" 
                                    Padding="12,8">
                                <StackPanel Orientation="Horizontal">
                                    <MaIc:MaterialIcon Kind="ChartLine" Width="16" Height="16" Margin="0,0,8,0"/>
                                    <TextBlock Text="View Statistics"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>
                    </Border>

                    <!-- Recent Activity Card -->
                    <Border Style="{StaticResource InfoCard}">
                        <StackPanel>
                            <TextBlock Text="Recent Activity" Style="{StaticResource HeaderText}"/>

                            <!-- Activity Items -->
                            <StackPanel>
                                <Border Background="#2A2D35" CornerRadius="6" Padding="10" Margin="0,0,0,8">
                                    <StackPanel>
                                        <TextBlock Text="Study Session Completed" 
                                                   FontSize="12" 
                                                   FontWeight="Medium" 
                                                   Foreground="#E0E0E0"/>
                                        <TextBlock Text="2 hours ago • 1h 30m" 
                                                   FontSize="10" 
                                                   Foreground="#A0AEC0"/>
                                    </StackPanel>
                                </Border>

                                <Border Background="#2A2D35" CornerRadius="6" Padding="10" Margin="0,0,0,8">
                                    <StackPanel>
                                        <TextBlock Text="Notes Updated" 
                                                   FontSize="12" 
                                                   FontWeight="Medium" 
                                                   Foreground="#E0E0E0"/>
                                        <TextBlock Text="1 day ago" 
                                                   FontSize="10" 
                                                   Foreground="#A0AEC0"/>
                                    </StackPanel>
                                </Border>

                                <Border Background="#2A2D35" CornerRadius="6" Padding="10">
                                    <StackPanel>
                                        <TextBlock Text="Module Created" 
                                                   FontSize="12" 
                                                   FontWeight="Medium" 
                                                   Foreground="#E0E0E0"/>
                                        <TextBlock Text="3 days ago" 
                                                   FontSize="10" 
                                                   Foreground="#A0AEC0"/>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Grid>
        </Grid>
    </ScrollViewer>
</UserControl>